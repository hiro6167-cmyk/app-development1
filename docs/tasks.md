# tasks.md — 実装タスクリスト

## 進捗サマリー

| Phase | 状態 | 完了率 |
|-------|------|--------|
| Phase 1: ブランディング刷新 | 🔲 未着手 | 0% |
| Phase 2: 基本機能拡張 | 🔲 未着手 | 0% |
| Phase 3: ソーシャル機能 | 🔲 未着手 | 0% |
| Phase 4: UX向上 | 🔲 未着手 | 0% |

---

## Phase 1: ブランディング刷新

### Task 1.1: カラースキーム変更
- [ ] Constants.swift の AppColors を更新
  - Primary: #FF8C42（温かいオレンジ）
  - Secondary: #FFD166（明るいイエロー）
  - Background: #FFF8F0（クリーム）
  - TextPrimary: #5D4037（ブラウン）
- [ ] 全Viewのカラー参照を更新
- [ ] Assets.xcassets のカラーセット更新
- ✅ テスト: 全画面でオレンジ系カラーが適用されている

### Task 1.2: 投稿タイプ名称変更
- [ ] PostType enum の displayName を更新
  - light: 「今日あったいいこと」
  - seed: 「世界にこうなってほしい」
- [ ] AppStrings の定数を更新
- [ ] HomeView のタブ表示を更新
- [ ] CreatePostView の選択ボタンを更新
- ✅ テスト: 全画面で新しい名称が表示される

### Task 1.3: フォント・スタイル調整
- [ ] より柔らかいフォントウェイトに調整
- [ ] 行間・余白の調整
- [ ] 角丸の調整（より丸みを帯びたUI）
- ✅ テスト: UIが温かみのある印象になっている

---

## Phase 2: 基本機能拡張

### Task 2.1: 画像投稿機能 - UI
- [ ] CreatePostView に画像追加UIを実装
  - PhotosPicker の統合
  - 画像プレビュー表示（最大4枚）
  - 画像削除ボタン
- [ ] Post モデルに imageUrls プロパティ追加
- [ ] PostCardView に画像表示を追加
- [ ] PostDetailView に画像ギャラリー追加
- ✅ テスト: 画像の選択・プレビュー・削除が動作する

### Task 2.2: 画像投稿機能 - バックエンド連携
- [ ] S3署名付きURL取得APIの実装
- [ ] 画像アップロード処理の実装
- [ ] 画像リサイズ処理（長辺1080px）
- [ ] キャッシュ戦略の実装（URLCache）
- ✅ テスト: 画像付き投稿の作成・表示が動作する

### Task 2.3: ブックマーク機能
- [ ] Bookmark モデル作成
- [ ] BookmarkService 作成
- [ ] PostCardView にブックマークボタン追加
- [ ] ProfileView に「ブックマーク」タブ追加
- [ ] BookmarksView 作成
- [ ] ローカルキャッシュ（UserDefaults）実装
- ✅ テスト: ブックマークの追加・削除・一覧表示が動作する

### Task 2.4: シェア機能
- [ ] PostCardView にシェアボタン追加
- [ ] PostDetailView にシェアボタン追加
- [ ] UIActivityViewController の統合
- [ ] シェアテキストのフォーマット定義
- ✅ テスト: 各SNSへのシェアが動作する

---

## Phase 3: ソーシャル機能

### Task 3.1: コメント機能 - UI
- [ ] Comment モデル作成
- [ ] CommentsViewModel 作成
- [ ] PostDetailView にコメントセクション追加
- [ ] CommentsView（全コメント一覧）作成
- [ ] コメント入力UI作成
- ✅ テスト: コメントの表示・入力UIが動作する

### Task 3.2: コメント機能 - バックエンド連携
- [ ] CommentService 作成
- [ ] コメントCRUD APIの統合
- [ ] コメント投稿処理の実装
- [ ] コメント削除処理の実装
- [ ] リアルタイム更新の検討
- ✅ テスト: コメントの投稿・削除が動作する

### Task 3.3: フォロー機能 - UI
- [ ] Follow モデル作成
- [ ] FollowViewModel 作成
- [ ] UserProfileView 作成（他ユーザー用）
- [ ] フォローボタンの実装
- [ ] FollowListView（フォロー/フォロワー一覧）作成
- [ ] ProfileView にフォロー数表示追加
- ✅ テスト: フォロー関連UIが動作する

### Task 3.4: フォロー機能 - バックエンド連携
- [ ] FollowService 作成
- [ ] フォロー/アンフォローAPIの統合
- [ ] フォロー中ユーザーの投稿フィルタ
- [ ] おすすめユーザー表示
- ✅ テスト: フォロー/アンフォローが動作する

---

## Phase 4: UX向上

### Task 4.1: ダークモード
- [ ] ダークモード用カラーセット定義
- [ ] Color extension で自動切り替え実装
- [ ] 全Viewのカラー適用確認
- [ ] 設定画面にテーマ切り替え追加
  - システム設定に従う
  - 常にライト
  - 常にダーク
- ✅ テスト: ライト/ダーク両方で正しく表示される

### Task 4.2: UIアニメーション
- [ ] スプラッシュ画面アニメーション強化
- [ ] 投稿カードの表示アニメーション（スライドイン）
- [ ] ブックマークのハートアニメーション
- [ ] 画面遷移アニメーション
- [ ] プルリフレッシュのカスタムアニメーション
- [ ] 投稿成功時のアニメーション
- [ ] タブ切り替えアニメーション
- ✅ テスト: アニメーションがスムーズに動作する

### Task 4.3: プッシュ通知
- [ ] APNs設定（Apple Developer）
- [ ] AWS SNS設定
- [ ] デバイストークン登録処理
- [ ] 通知受信処理
- [ ] 通知タップ時のディープリンク
- [ ] 設定画面に通知設定追加
- ✅ テスト: 各種通知が正しく届く

### Task 4.4: エラーハンドリング強化
- [ ] 全APIエラーの適切なハンドリング
- [ ] オフライン状態の検出と表示
- [ ] 空状態の表示改善
- [ ] リトライ処理の実装
- ✅ テスト: 各エラー状態で適切なUIが表示される

---

## バックエンド追加タスク

### Task B.1: DynamoDB テーブル追加
- [ ] CommentsTable 作成
- [ ] FollowsTable 作成
- [ ] BookmarksTable 作成
- [ ] GSI（グローバルセカンダリインデックス）設定

### Task B.2: Lambda関数追加
- [ ] コメントCRUD関数
- [ ] フォローCRUD関数
- [ ] ブックマークCRUD関数
- [ ] S3署名付きURL生成関数

### Task B.3: API Gateway更新
- [ ] 新規エンドポイント追加
- [ ] 認証設定

---

## 完了チェックリスト

各タスク完了時に確認：

- [ ] ビルドが通る
- [ ] 既存機能が壊れていない
- [ ] 新機能が仕様通り動作する
- [ ] ダークモードで正しく表示される（Phase 4以降）
- [ ] エラー状態が適切にハンドリングされている
- [ ] コードがCLAUDE.mdのルールに従っている
